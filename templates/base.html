{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Django Site{% endblock %}</title>
    
    <!-- CSS files -->
    <link rel="stylesheet" href="{% static 'dist/output.css' %}">
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    
    {% block extra_head %}
    <!-- Additional head content -->
    {% endblock %}
</head>
<!-- Icons -->
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<body x-data="{ sidebarOpen: false }">
    <div class="flex h-screen bg-gray-100">
        <!-- Sidebar -->
        {% include 'includes/sidebar.html' %}

        <div class="flex-1 flex flex-col overflow-hidden lg:ml-72">
            <!-- Navbar -->
            {% if user.is_authenticated %}
                {% include 'includes/logged_in_header.html' %}
            {% else %}
                {% include 'includes/header_marketing.html' %}
            {% endif %}

            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100">
                <div class="container mx-auto min-h-screen">
                    {% block content %}
                    <!-- Main content goes here -->
                    {% endblock %}
                </div>
                {% include 'includes/footer.html' %}
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.js"></script>
    
    <!-- JavaScript files -->
    {% block scripts %}
    <script>
        document.querySelectorAll('.nav-link').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const targetId = this.getAttribute('href').split('#')[1];
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
    {% endblock %}
</body>
</html>